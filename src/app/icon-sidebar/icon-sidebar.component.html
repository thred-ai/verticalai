<div
  class="bg-theme-2 h-100 border-table-right d-flex flex-column justify-content-start align-items-center pb-3"
  style="width: 70px !important; min-width: 70px !important"
>
  <div class="w-100 border-bottom" style="aspect-ratio: 1">
    <div class="rounded-circle icons w-100 p-1" style="aspect-ratio: inherit">
      <img
        class="px-2 h-100"
        style="object-fit: contain"
        [src]="'assets/verticalai_short.png'"
      />
    </div>
  </div>

  <div
    class="rounded-circle mx-3 mt-4 icons bg-pink"
    style="
      border-style: solid;
      border-width: 0.2rem;
      border-color: rgb(255, 232, 248);
      height: fit-content;
    "
    *ngIf="loadedUser"
    [mdbPopover]="template"
    placement="right"
    [trigger]="'click'"
    id="profile-toggle"
    #profileToggle
  >
    <img
      *ngIf="loadedUser.url"
      class="w-100 p-0 m-auto rounded-circle"
      style="object-fit: contain; aspect-ratio: 1"
      [src]="loadedUser.url"
    />

    <ng-template #template>
      <div
        class="popover-body-padding bg-theme border-table text-center px-3"
        id="profile-menu"
        style="min-width: 250px"
        (clickOutside)="profileToggle.click()"
      >
        <div
          class="rounded-circle icons bg-pink mx-auto mb-4"
          style="
            border-style: solid;
            border-width: 0.2rem;
            border-color: rgb(255, 232, 248);
            width: fit-content;
            height: 80px;
          "
        >
          <img
            *ngIf="loadedUser.url != null && loadedUser.url != undefined"
            class="h-100 p-0 m-auto rounded-circle"
            style="object-fit: contain; aspect-ratio: 1"
            [src]="loadedUser.url"
          />
        </div>
        <span
          class="fw-bolder text-light px-2 d-none d-md-block"
          style="font-size: medium"
        >
          {{ loadedUser.name ? loadedUser.name : "" }}
        </span>
        <b
          class="fw-bold mb-4 text-light text-center"
          style="font-size: small"
          >{{
            loadedUser.email != null ? loadedUser.email : "Not Signed In"
          }}</b
        >
        <br />
        <div class="w-100 text-start mt-3">
          <a
            role="button"
            class="w-100 btn text-light bg-secondary px-1 py-2 fw-bold rounded"
            style="font-size: small"
            (click)="root.editProfile()"
            *ngIf="loadedUser.email != null"
          >
            Edit Profile
          </a>
          <!-- <a
            role="button"
            class="w-100 btn text-light bg-secondary px-1 py-2 mt-2 fw-bold rounded"
            style="font-size: small"
            (click)="editBilling()"
          >
            View Billing
          </a> -->
          <a
            role="button"
            class="w-100 btn bg-black text-white px-1 py-2 mt-2 fw-bold rounded"
            style="font-size: small"
            (click)="root.signOut()"
            *ngIf="loadedUser.email"
          >
            Sign Out
          </a>
        </div>
      </div>
    </ng-template>
  </div>

  <div
    class="mx-2 text-light fw-bold d-flex justify-content-center align-items-center mt-5"
    style="aspect-ratio: 1"
    role="button"
    [mdbPopover]="template2"
    placement="right"
    [trigger]="'click'"
    #folderToggle
  >
    <mat-icon class="fw-bold">folder</mat-icon>

    <ng-template #template2>
      <ng-container *ngIf="loadedUser && loadedUser.utils">
        <div
          class="bg-theme border-table text-start pt-3"
          id="profile-menu"
          style="min-width: 250px; max-height: 250px; overflow-y: scroll"
          (clickOutside)="folderToggle.click()"
        >
          <b class="fw-bold text-light px-3">Projects</b>

          <div class="w-100 py-2" *ngIf="loadedUser.utils.length > 0">
            <div
              *ngFor="let n of loadedUser.utils ?? []"
              class="d-flex justify-content-between align-items-center p-3 proj{{
                selectedWorkflow && selectedWorkflow == n.id ? '-select' : ''
              }}"
              (click)="openProj.emit(n.id)"
              role="button"
            >
              <div class="d-flex justify-content-between align-items-center">
                <div
                  class="bg-white rounded-circle shadow d-flex justify-content-center align-items-center"
                  style="
                    object-fit: contain;
                    aspect-ratio: 1;
                    overflow: hidden;
                    width: 45px;
                  "
                >
                  <img
                    class="m-auto rounded-circle"
                    style="object-fit: contain; height: 85%; width: 85%"
                    [src]="n.displayUrl"
                  />
                </div>
                <div class="text-start w-100 ms-2">
                  <div class="w-100 ps-2 text-light text-start fw-normal">
                    {{ n.name }}
                  </div>
                  <div
                    class="w-100 ps-2 text-light text-start fw-normal"
                    style="font-size: 10px"
                  >
                    {{ n.created | date }}
                  </div>
                </div>
              </div>
              <mat-icon class="text-secondary"> read_more </mat-icon>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-template>
  </div>

  <div
    class="mx-2 text-light fw-bold d-flex justify-content-center align-items-center mt-5"
    style="aspect-ratio: 1"
    role="button"
  >
    <mat-icon class="fw-bold">file_upload</mat-icon>
  </div>

  <div
    class="mx-2 text-light fw-bold d-flex justify-content-center align-items-center mt-5"
    style="aspect-ratio: 1"
    role="button"
    [mdbPopover]="tooltip"
    placement="right"
    [trigger]="'hover'"
  >
    <mat-icon class="fw-bold">settings_applications</mat-icon>
    <ng-template #settingooltip>
      <verticalai-tooltip [text]="'Config'"></verticalai-tooltip>
    </ng-template>
  </div>

  <div
    class="mx-2 text-light fw-bold d-flex justify-content-center align-items-center mt-5"
    style="aspect-ratio: 1"
    role="button"
    [mdbPopover]="tooltip"
    placement="right"
    [trigger]="'hover'"
  >
    <mat-icon class="fw-bold">code</mat-icon>
    <ng-template #tooltip>
      <verticalai-tooltip [text]="'Script'"></verticalai-tooltip>
    </ng-template>
  </div>

  <div
    class="mx-2 text-light fw-bold d-flex justify-content-center align-items-center mt-5"
    style="aspect-ratio: 1"
    role="button"
    [mdbPopover]="tooltip"
    placement="right"
    [trigger]="'hover'"
  >
    <mat-icon class="fw-bold">storage</mat-icon>
    <ng-template #tooltip>
      <verticalai-tooltip [text]="'Memory'"></verticalai-tooltip>
    </ng-template>
  </div>
</div>
